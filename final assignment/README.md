# EPA-simmodel

This project uses the flood model simulating the Room for River (RfR) written by [Ciullo et al. (2019)](https://www.mdpi.com/2073-4441/11/12/2530).

## Installation

After downloading the project folder from GitHub, open terminal and change directory to the project directory **epa141A_Labs_Groups_Asians**

From the project directory, change directory to **final assignment**, and run the following command lines to install required Python packages:

```bash
pip install -r requirements.txt
```

## Usage

If not already on the directory **final assignment**, change the current directory to this directory.

### Step 1: Run experiments on no policies

On terminal, run the following command line to run experiments on no policies

```bash
python3 dike_model_simulation_pol0.py
```

The script on **dike_model_simulation_pol0.py** will run 20000 experiments on no polices. The output file is **pol0_sc500_8.tar.gz** in the **experiment** directory. This output file will be analysed in the notebook **analysis.ipynb** in the **final assignment** directory.

### Step 2: Open exploration

Open the **analysis.ipynb** and run the cells up until the section **Robustness**.

In the open exploration, the worse-case scenarios are identified and saved in the file **scenario_cart.csv** in the **experiment** directory.

The figures of the open exploration used in the report are generated by the notebook **analysis.ipynb** and are saved in the directory **img** 

### Step 3: Directed search using MOEA

On terminal, run the following command line to run directed search for policy using MOEA

```bash
python3 dike_model_simulation_policy_search.py
```

If run on a super computer supporting [MPIEvaluator](https://emaworkbench.readthedocs.io/en/latest/indepth_tutorial/mpi-evaluator.html), run the following commandline instead

```bash
python3 dike_model_simulation_policy_search_DB.py
```

The output files are called **results_optimize_box_{box number}_max_{seed number}.tar.gz**, where
* box number: takes the following values {1, 2, 3} (i.e 3 scenarios)
* seed number: takes the following values {0, 1, 2, 3, 4} (i.e 5 seeds)

### Step 4: Sensitivity analysis and Scenario discovery






